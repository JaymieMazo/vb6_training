<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />
<meta http-equiv="Content-Language" content="en" />
<meta http-equiv="Content-Style-Type" content="text/css" />
<meta http-equiv="Content-Script-Type" content="text/javascript" />
<meta name="robots" content="all" scheme="http://www.robotstxt.org/" />
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1.1 Build 026" />
<meta name="Date" content="2010-02-04T18:10:52Z" />
<meta name="doctitle" content="Oracle&reg; Database Extensions for .NET Developer's Guide 11g Release 2 (11.2) for Microsoft Windows" />
<meta name="partno" content="E12248-01" />
<meta name="docid" content="CLRNT" />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />
<link rel="Stylesheet" href="../../dcommon/css/blafdoc.css" title="Default" type="text/css" />
<script type="text/javascript" src="../../dcommon/js/doccd.js">
</script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Glossary" href="glossary.htm" title="Glossary" type="text/html" />
<link rel="Prev" href="install.htm" title="Previous" type="text/html" />
<link rel="Next" href="demo.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e12248.pdf" title="PDF version" type="application/pdf" />
<title>Development and Deployment with Visual&nbsp;Studio</title>
</head>
<body>
<div class="header">
<div class="zz-skip-header"><a name="top" id="top" href="#BEGIN">Skip Headers</a></div>
<table class="simple oac_no_warn" summary="" cellspacing="0" cellpadding="0" width="100%">
<tr>
<td align="left" valign="top"><b>Oracle&reg; Database Extensions for .NET Developer's Guide<br />
11<i>g</i> Release 2 (11.2) for Microsoft Windows</b><br />
Part Number E12248-01</td>
<td valign="bottom" align="right">
<table class="icons oac_no_warn" summary="" cellspacing="0" cellpadding="0" width="245">
<tr>
<td align="center" valign="top"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td align="center" valign="top"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td align="center" valign="top"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td align="center" valign="top"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td align="center" valign="top"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
<hr />
<table class="simple oac_no_warn" summary="" cellspacing="0" cellpadding="0" width="100%">
<tr>
<td align="left" valign="top">
<table class="simple oac_no_warn" summary="" cellspacing="0" cellpadding="0" width="98">
<tr>
<td align="center" valign="top"><a href="install.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td align="center" valign="top"><a href="demo.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td align="right" valign="top" style="font-size: 90%"><a href="../e12248.pdf">View PDF</a></td>
</tr>
</table>
<a name="BEGIN" id="BEGIN"></a></div>
<div class="IND"><!-- End Header --><a id="CHDFBGAI" name="CHDFBGAI"></a><a id="CLRNT0003" name="CLRNT0003"></a>
<h1 class="chapter"><span class="secnum">3</span> Development and Deployment with Visual&nbsp;Studio</h1>
<p>This chapter describes the steps that are required to develop and deploy a .NET stored procedure or function into an Oracle Database.</p>
<p>This chapter contains these topics:</p>
<ul>
<li>
<p><a href="#CHDDAGDH">Step 1: Develop the Stored Procedure or Function and Build it into an Assembly</a></p>
</li>
<li>
<p><a href="#CHDIFCDB">Step 2: Run the Oracle Deployment Wizard for .NET</a></p>
</li>
<li>
<p><a href="#CHDHFCFE">Step 3: Choose the Procedure or Function to Deploy and Security Level</a></p>
</li>
<li>
<p><a href="#CHDGHIHA">Step 4: Determine the Appropriate Parameter Type Mappings</a></p>
</li>
<li>
<p><a href="#CHDFDDAD">Step 5: Deploy the Procedure or Function</a></p>
</li>
<li>
<p><a href="#BIHIIJED">Step 6: Test the Procedure or Function</a></p>
</li>
<li>
<p><a href="#BIHIJFJJ">Step 7: Debug the Procedure or Function</a></p>
</li>
</ul>
<a id="CHDDAGDH" name="CHDDAGDH"></a><a id="CLRNT146" name="CLRNT146"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Step 1: Develop the Stored Procedure or Function and Build it into an Assembly<a id="sthref126" name="sthref126"></a><a id="sthref127" name="sthref127"></a><a id="sthref128" name="sthref128"></a><a id="sthref129" name="sthref129"></a><a id="sthref130" name="sthref130"></a><a id="sthref131" name="sthref131"></a><a id="sthref132" name="sthref132"></a><a id="sthref133" name="sthref133"></a><a id="sthref134" name="sthref134"></a></h2>
<p>Write the stored procedure or function using Microsoft Visual Studio with an appropriate .NET language.</p>
<p>Use Oracle Data Provider for .NET (<code>Oracle.DataAccess.Client</code> and <code>Oracle.DataAccess.Types</code>) in a .NET stored procedure or function to provide data access.</p>
<p>Build the stored procedure or function into an assembly as a DLL, and not as an EXE. This is typically accomplished using a Class Library project.</p>
<p>Keep in mind the Oracle Data Provider for .NET limitations and restrictions, especially concerning connections and transactional semantics, when designing and developing a .NET procedure or function that uses data access.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ODPNT" href="http://www.oracle.com/pls/db102/lookup?id=ODPNT"><span class="italic">Oracle Data Provider for .NET Developer's Guide</span></a></div>
</div>
<!-- class="sect1" -->
<a id="CHDIFCDB" name="CHDIFCDB"></a><a id="CLRNT147" name="CLRNT147"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Step 2: Run the Oracle Deployment Wizard for .NET</h2>
<p>Run Oracle Deployment Wizard for .NET from Microsoft Visual Studio. Oracle Deployment Wizard for .NET is installed as part of the Oracle Developer Tools for Visual Studio. This wizard requires <code>SYSDBA</code> credentials, the name of the assembly to be deployed, and the database it is being deployed to.</p>
</div>
<!-- class="sect1" -->
<a id="CHDHFCFE" name="CHDHFCFE"></a><a id="CLRNT148" name="CLRNT148"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Step 3: Choose the Procedure or Function to Deploy and Security Level</h2>
<p>Choose the procedure or function to be deployed when the Oracle Deployment Wizard for .NET displays the list of methods for that assembly.</p>
<p>Also, choose the security level.</p>
<p>Oracle Database Extensions for .NET executes .NET stored procedures or functions at a specific security level. The security level dictates the Code Access Permissions granted to a .NET stored procedure or function. By default, .NET stored procedures or functions are executed with the SAFE security level.</p>
<p>The security levels are:</p>
<ul>
<li>
<p>Safe</p>
<p>In Safe level, the .NET stored procedure or function is allowed to access only database resources. Access to any external resources such as local files, networks, and so on, is not allowed.</p>
</li>
<li>
<p>External</p>
<p>In External level, the .NET stored procedure or function is allowed to read or write to local files, and to access network resources such as sockets and internet nodes, and so on.</p>
</li>
<li>
<p>Unsafe</p>
<p>In Unsafe level, the .NET stored procedure or function is allowed unrestricted execution including execution of unmanaged code. It is a superset of all other security levels.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="demo.htm#CJFFIGID">"Step 3: Choose the Function to Deploy"</a> for the process of entering security level</div>
</div>
<!-- class="sect1" -->
<a id="CHDGHIHA" name="CHDGHIHA"></a><a id="CLRNT149" name="CLRNT149"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Step 4: Determine the Appropriate Parameter Type Mappings<a id="sthref135" name="sthref135"></a><a id="sthref136" name="sthref136"></a><a id="sthref137" name="sthref137"></a><a id="sthref138" name="sthref138"></a><a id="sthref139" name="sthref139"></a><a id="sthref140" name="sthref140"></a><a id="sthref141" name="sthref141"></a><a id="sthref142" name="sthref142"></a></h2>
<p>Determine the correct mapping between .NET and Oracle data types for creating a PL/SQL wrapper for the .NET stored procedure or function. The Oracle Deployment Wizard for .NET provides default mappings, but they can be overridden.</p>
<p>In case of overloaded .NET stored procedures or functions, you need to provide distinct names for the PL/SQL wrappers.</p>
<p>Tables in Appendix A provides conversion information.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="appendixa.htm#CHDHIGFF">"Data Type Conversion"</a></div>
</div>
<!-- class="sect1" -->
<a id="CHDFDDAD" name="CHDFDDAD"></a><a id="CLRNT150" name="CLRNT150"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Step 5: Deploy the Procedure or Function<a id="sthref143" name="sthref143"></a><a id="sthref144" name="sthref144"></a></h2>
<p>Deploy the procedure or function in the database. The wizard performs the following steps:</p>
<ol>
<li>
<p>Connects as <code>SYSDBA</code>.</p>
</li>
<li>
<p>Copies the user assembly to the <code><span class="codeinlineitalic">ORACLE_BASE\\ORACLE_HOME</span></code><code>\bin\CLR</code> directory or its subdirectory.</p>
</li>
<li>
<p>Creates an Oracle library object and grants execute privilege on this library object to the database user:</p>
<pre xml:space="preserve" class="oac_no_warn">CREATE OR REPLACE LIBRARY CLRLIBRARY1_DLL AS '$ORACLE_HOME\
    bin\clr\CLRLibrary1_dll;
GRANT EXECUTE ON CLRLIBRARY1_DLL TO SCOTT;
</pre></li>
<li>
<p>Creates a PL/SQL wrapper in the user's database schema for each procedure or function, according to the parameter type mappings defined by the user.</p>
</li>
</ol>
</div>
<!-- class="sect1" -->
<a id="BIHIIJED" name="BIHIIJED"></a><a id="CLRNT151" name="CLRNT151"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Step 6: Test the Procedure or Function</h2>
<p>Test the .NET stored procedure or function by calling the PL/SQL wrapper.</p>
<p>The PL/SQL wrapper can be located and executed easily using Oracle Developer Tools for Visual Studio, or from a tool like SQL*Plus.</p>
</div>
<!-- class="sect1" -->
<a id="BIHIJFJJ" name="BIHIJFJJ"></a><a id="CLRNT152" name="CLRNT152"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Step 7: Debug the Procedure or Function<a id="sthref145" name="sthref145"></a><a id="sthref146" name="sthref146"></a><a id="sthref147" name="sthref147"></a><a id="sthref148" name="sthref148"></a><a id="sthref149" name="sthref149"></a></h2>
<p>Whenever a .NET stored procedure or function is invoked, the Oracle database listener redirects the request to a multithreaded CLR external procedure agent, <code>extproc.exe</code>. Each .NET stored procedure or function is executed in the context of the <code>extproc.exe</code> process.</p>
<ol>
<li>
<p>Ensure that the debug versions of the .NET assembly representing the .NET stored procedure or function and its <code>pdb</code> file and dependency DLLs, and their respective <code>pdb</code> files are copied to the <code><span class="codeinlineitalic">ORACLE_BASE\\ORACLE_HOME</span></code><code>\bin\clr</code> directory or one of its subdirectories, based on the path provided while creating the library.</p>
</li>
<li>
<p>Attach the debugger to the <code>extproc.exe</code> process. Note that the debugger should be capable of debugging .NET code. If Visual Studio is used for debugging, select the Native and Common Language Runtime options in the Attach to Process dialog box. The Native option can be deselected if any .NET stored procedure has already been run in the context of the same <code>extproc.exe</code> process.</p>
</li>
<li>
<p>When the debugger is attached, open the .NET stored procedure or function source code and set any breakpoints that are needed, at the required locations.</p>
</li>
<li>
<p>Debug the .NET stored procedure.</p>
</li>
</ol>
<div class="infoboxnote">
<p class="notep1">Note:</p>
You can use Oracle Data Provider for .NET tracing mechanism to troubleshoot application issues. Please see Debug Tracing section in <a class="olink ODPNT0007" href="../../doc/win.112/e12249/features.htm#ODPNT0007"><span class="italic">Oracle Data Provider for .NET Developer's Guide</span></a>.</div>
</div>
<!-- class="sect1" --></div>
<!-- class="ind" -->
<div class="footer">
<hr />
<table class="simple oac_no_warn" summary="" cellspacing="0" cellpadding="0" width="100%">
<col width="33%" />
<col width="*" />
<col width="33%" />
<tr>
<td align="left">
<table class="simple oac_no_warn" summary="" cellspacing="0" cellpadding="0" width="98">
<tr>
<td align="center" valign="top"><a href="install.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td align="center" valign="top"><a href="demo.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td style="font-size: 90%" align="center" class="copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2004, 2010,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td align="right">
<table class="icons oac_no_warn" summary="" cellspacing="0" cellpadding="0" width="245">
<tr>
<td align="center" valign="top"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td align="center" valign="top"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td align="center" valign="top"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td align="center" valign="top"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td align="center" valign="top"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
</div>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
